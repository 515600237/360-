webpackJsonp([2],{"4ml/":function(t,e){},"5pHo":function(t,e){},DmyL:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),o={name:"AssessHeader",props:{closed:Boolean},data:function(){return{isClosed:this.closed}},create:function(){},methods:{onClickLeft:function(){"AssessContent"==this.$route.name?this.webApp.WebCallApp("CmdGoBack",{},function(t){}):this.$router.go(-1)}},watch:{closed:function(t,e){this.isClosed=t}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[this.isClosed?e("van-nav-bar",{attrs:{title:"360评估","left-arrow":"",fixed:""},on:{"click-left":this.onClickLeft}}):this._e(),this._v(" "),this.isClosed?this._e():e("van-nav-bar",{attrs:{title:"360评估",fixed:""},on:{"click-left":this.onClickLeft}})],1)},staticRenderFns:[]};var a={name:"App",components:{AssessHeader:n("VU/8")(o,i,!1,function(t){n("5pHo")},"data-v-4eae635b",null).exports},data:function(){return{closed:!0}},methods:{back:function(){console.log(this.$route),"AssessContent"==this.$route.name?this.webApp.WebCallApp("CmdGoBack",{},function(t){}):this.$router.go(-1)}},watch:{$route:function(t,e){"Answer"==t.name?this.closed=!0:"AssessContent"==t.name&&1==this.Global.staticData.onlyYou&&(this.closed=!1)}},created:function(){console.log(this.WebBack,"1111111"),this.WebBack.push(this.back);for(var t=window.location.href,e={},n=t.substring(t.indexOf("?")+1).split("&"),s=0;s<n.length;s++){var o=n[s].indexOf("="),i=n[s].substring(0,o),a=n[s].substring(o+1);e[i]=a}e.humanId||e.instituteId||this.$toast("无权限"),this.Global.staticData.humanId=e.humanId,this.Global.staticData.instituteId=e.instituteId,this.Global.staticData.onlyYou=e.onlyYou,null!=this.Global.staticData.onlyYou&&1==this.Global.staticData.onlyYou?this.closed=!1:this.closed=!0}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("AssessHeader",{attrs:{closed:this.closed}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")(a,c,!1,function(t){n("DmyL")},null,null).exports,l=n("/ocq");n("hzlE");s.a.use(l.a);var u=new l.a({routes:[{path:"/",redirect:"/AssessContent"},{path:"/AssessContent",name:"AssessContent",component:function(t){return n.e(0).then(function(){var e=[n("3at0")];t.apply(null,e)}.bind(this)).catch(n.oe)}},{path:"/Answer",name:"Answer",component:function(t){return new Promise(function(t){t()}).then(function(){var e=[n("hzlE")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]}),d=(n("RVp4"),n("lSy/"),n("Fd2+")),h=(n("4ml/"),n("sVYa"),n("mtWM")),f=n.n(h),p={staticData:{humanId:"9ac54d39117e4901a1b9dfdc8c0c6827",instituteId:"",onlyYou:0}},m=n("VU/8")(p,null,!1,null,null,null).exports,v=n("mvHQ"),b=n.n(v),g={APPCommendBack:function(){C.length>0?"function"==typeof C[C.length-1]&&C[C.length-1].call(window):this.isInApp()?this.isEmptyObject(w)&&this.WebCallApp("CmdGoBack"):history.back(-1)},WebCallApp:function(t,e,n,s){if(void 0!==Elf.AppCallWeb){s=s||window,e=e||{};var o=null;o="callCamera"==t?"examCamera":this.getSerialNumber();var i={args:e,command:t};n&&(w[o]={callback:n,context:s}),window.webkit&&window.webkit.messageHandlers?(i.sn=o,window.webkit.messageHandlers.WebCallApp.postMessage(b()(i))):Elf.WebCallApp?(i.sn=o,Elf.WebCallApp(b()(i))):this.isInCef()&&(i.sn=o,Elf.WebCallCef(b()(i)))}},AppCommendTostInfo:function(t){t.msg&&Object(d.a)(t.msg)},isInApp:function(){if(void 0!==Elf.AppCallWeb)return!!(window.webkit&&window.webkit.messageHandlers||"function"==typeof Elf.WebCallApp||"function"==typeof Elf.WebCallCef)},isInIOS:function(){return window.webkit&&window.webkit.messageHandlers},isInAndroid:function(){if(void 0!==Elf.AppCallWeb)return"function"==typeof Elf.WebCallApp},isInCef:function(){if(void 0!==Elf.AppCallWeb)return"function"==typeof Elf.WebCallCef},isEmptyObject:function(){var t=void 0;for(t in obj)return!1;return!0},UUID:function(t,e){var n,s,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(e=e||o.length,t)for(n=0;n<t;n++)i[n]=o[0|Math.random()*e];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(s=0|16*Math.random(),i[n]=o[19==n?3&s|8:s]);return i.join("")},getSerialNumber:function(){var t=this.UUID(3,8);return(new Date).format("yyyyMMddhhmmssS")+t}};!function(){if(window.applicationCache||"undefined"!=typeof Worker){var t=window;"undefined"==typeof Elf&&(t.Elf={}),Elf.global=t}else alert("E001-检测到您的环境不支持HTML5，程序终止运行！")}(),Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var w={},C=[],y=[],A=[],I=[],k=[],E=[],_=[],M=[],$=[],x=[],W=[],q={MsgUpdateBookState:function(t){y.length>0&&y.forEach(function(e){e.call(window,t)})},MsgSoftKeyboardBounceUp:function(t){W.length>0&&W.forEach(function(e){e.call(window,t)})},MsgRefresh:function(t){A.length>0&&A.forEach(function(e){e.call(window,t)})},MsgAddToObtainedBook:function(t){k.length>0&&k.forEach(function(e){e.call(window,t)})},MsgAddToBookShelf:function(t){I.length>0&&I.forEach(function(e){e.call(window,t)})},MsgGoBack:function(t){g.APPCommendBack(t)},MsgReBack:function(){var t=this;E&&E.length>0&&E.forEach(function(e){e.call(t)})},MsgToastInfo:function(t){g.AppCommendTostInfo(t)},MsgNetworkState:function(t){var e=this;_&&_.length>0&&_.forEach(function(n){n.call(e,t)})},MsgAppStarting:function(t){var e=this;M&&M.length>0&&M.forEach(function(n){n.call(e,t)})},MsgAppReactivate:function(t){var e=this;$&&$.length>0&&$.forEach(function(n){n.call(e,t)})},MsgAppScreenShots:function(t){var e=this;x&&x.length>0&&x.forEach(function(n){n.call(e,t)})}};"undefined"!=typeof Elf&&(Elf.AppCallWeb=function(t,e){if(e&&"string"==typeof e){e=decodeURIComponent(e.replace(/\+/g,"%20"));try{e=JSON.parse(e)}catch(n){return void w[t].callback.call(w[t].context,e)}if(e.sn)return void w[t].callback.call(w[t].context,e.QrCode)}w[t]?(JSON.parse(e.opFlag)?w[t].callback.call(w[t].context,"string"==typeof e.serviceResult?JSON.parse(e.serviceResult):e.serviceResult):Toast(e.errorMessage?e.errorMessage:"服务器异常！"),delete w[t]):q[t]&&"function"==typeof q[t]&&q[t].call(window,e)}),s.a.config.productionTip=!1,s.a.use(d.b),s.a.prototype.$http=f.a,s.a.prototype.Global=m,s.a.prototype.webApp=g,s.a.prototype.WebBack=C,s.a.prototype.Keyboar=W,new s.a({el:"#app",router:u,components:{App:r},template:"<App/>"})},RVp4:function(t,e){},hzlE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"Answer",data:function(){return{radio:0,count:0,normId:0,disabled:"false",questionList:[],matchId:0,termId:0,remnant:0,index:0}},methods:{descArea:function(t){if(console.log(t),t.content1&&t.content1.length){var e=t.content1.length;this.remnant=e}},answerQuestion:function(t,e){var n=this;this.$http({method:"post",url:"/test/app/eval/questions",data:{normId:t,caId:this.Global.staticData.humanId,termId:e}}).then(function(t){0==t.data.code?n.sucess(t):n.$toast(t.msg)})},sucess:function(t){console.log(t),this.questionList=t.data.body},submitQuestion:function(){var t=[];console.log(this.questionList),this.questionList.forEach(function(e){var n={questionId:e.id,content:e.content1,optionId:e.optionId};t.push(n)});var e={matchId:this.matchId,createrId:this.Global.staticData.humanId,termId:this.termId,normId:this.normId,detailList:t},n=this.questionList[this.count];if(1!=n.type||"number"==typeof n.optionId){var s=this.questionList[this.count];2!=s.type||s.content1?this.postSubmit(e):this.$toast("请输入内容")}else this.$toast("请选择")},postSubmit:function(t){var e=this;this.$http({method:"post",url:"/test/base/answer/save",data:t}).then(function(t){e.$toast({duration:600,message:"提交成功"}),setTimeout(function(){e.$router.push({name:"AssessContent"})},1200)})},onChange:function(t){this.count=t,this.$refs.swipe.swipeTo(t)},AnswerPrev:function(){this.count--,this.onChange(this.count)},AnswerNext:function(){var t=this.questionList[this.count];if(console.log(t),2!=t.type||t.content1){var e=this.questionList[this.count];1!=e.type||"number"==typeof e.optionId?(this.count++,this.count<this.questionList.length&&this.onChange(this.count)):this.$toast("请选择")}else this.$toast("请输入内容")}},mounted:function(){this.normId=this.$route.query.normId,this.matchId=this.$route.query.id,this.termId=this.$route.query.termId,this.answerQuestion(this.normId,this.termId)}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer"},[n("div",{ref:"QueSwipe",staticClass:"answer-switch"},[n("van-swipe",{ref:"swipe",attrs:{loop:!1,touchable:!1,"show-indicators":!1}},t._l(t.questionList,function(e,s){return n("van-swipe-item",{key:s,on:{change:function(e){return t.onChange(s)}}},[n("div",{staticClass:"answer-content"},[n("div",{staticClass:"answer-header"},[n("p",[n("span",[t._v(t._s(s+1))]),t._v("."+t._s(e.content))])]),t._v(" "),1==e.type?n("div",{staticClass:"amswer-middle"},[n("van-radio-group",{model:{value:e.optionId,callback:function(n){t.$set(e,"optionId",n)},expression:"item.optionId"}},t._l(e.questionOptionList,function(e,s){return n("van-radio",{key:s,attrs:{name:e.id}},[t._v(t._s(e.content)+"\n                                ")])}),1)],1):t._e(),t._v(" "),2==e.type?n("div",{staticClass:"amswer-middle"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content1,expression:"item.content1"}],staticClass:"text",attrs:{maxlength:"180"},domProps:{value:e.content1},on:{input:[function(n){n.target.composing||t.$set(e,"content1",n.target.value)},function(n){return t.descArea(e)}]}}),t._v(" "),n("p",{staticClass:"pay-service-textarea-text"},[n("span",[t._v(t._s(t.remnant))]),t._v("/180")])]):t._e()])])}),1)],1),t._v(" "),n("div",{staticClass:"answer-bottom"},[n("button",{staticClass:"btn",class:{disable:0==t.count},attrs:{disabled:0==t.count},on:{click:t.AnswerPrev}},[t._v("上一题")]),t._v(" "),t.count<t.questionList.length-1?n("button",{staticClass:"btn endAnswer",on:{click:function(e){return t.AnswerNext()}}},[t._v("下一题")]):t._e(),t._v(" "),t.count==t.questionList.length-1?n("button",{staticClass:"btn submit",on:{click:function(e){return t.submitQuestion()}}},[t._v("提交")]):t._e()])])},staticRenderFns:[]};var i=n("VU/8")(s,o,!1,function(t){n("yqeU")},"data-v-2d5737c9",null);e.default=i.exports},"lSy/":function(t,e){},yqeU:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8296e252337550b2868e.js.map